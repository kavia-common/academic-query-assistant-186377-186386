{"is_source_file": true, "format": "JavaScript", "description": "This file defines an API client module for interacting with the backend of an Academic Query Assistant application. It includes functions for session management, retrieving chat history, sending chat messages, and error handling.", "external_files": ["localStorage", "fetch"], "external_methods": ["localStorage.getItem", "localStorage.setItem", "localStorage.removeItem", "fetch"], "published": ["getSessionId", "getHistory", "sendChatMessage", "resetSession"], "classes": [], "methods": [{"name": "toUserError(err, fallback = 'Request failed')", "description": "Converts various error types into user-friendly Error objects, especially handling network-related errors for better messaging.", "scope": "", "scopeKind": ""}, {"name": "getSessionId()", "description": "Retrieves or creates a session ID by communicating with the backend; stores it in localStorage.", "scope": "", "scopeKind": ""}, {"name": "getHistory()", "description": "Fetches chat history for the current session, updating session ID if the backend indicates a new session.", "scope": "", "scopeKind": ""}, {"name": "sendChatMessage(question)", "description": "Sends a question to the backend chat API and returns the assistant's answer, updating the session ID if necessary.", "scope": "", "scopeKind": ""}, {"name": "resetSession()", "description": "Clears the stored session ID to force creation of a new session on next interaction.", "scope": "", "scopeKind": ""}], "calls": ["fetch", "resp.json", "resp.headers.get", "localStorage.getItem", "localStorage.setItem", "localStorage.removeItem"], "search-terms": ["API client", "session management", "chat backend", "localStorage", "fetch API", "session_id", "history retrieval", "send message"], "state": 2, "file_id": 13, "knowledge_revision": 38, "git_revision": "8c8d3c415d39c109c3238199341350308f81e0fc", "revision_history": [{"29": ""}, {"38": "8c8d3c415d39c109c3238199341350308f81e0fc"}], "ctags": [{"_type": "tag", "name": "BASE_URL", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186386/study_assistant_frontend/src/api.js", "pattern": "/^const BASE_URL = 'http:\\/\\/localhost:3001';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getHistory", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186386/study_assistant_frontend/src/api.js", "pattern": "/^export async function getHistory() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getSessionId", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186386/study_assistant_frontend/src/api.js", "pattern": "/^export async function getSessionId() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "resetSession", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186386/study_assistant_frontend/src/api.js", "pattern": "/^export function resetSession() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "sendChatMessage", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186386/study_assistant_frontend/src/api.js", "pattern": "/^export async function sendChatMessage(question) {$/", "language": "JavaScript", "kind": "function", "signature": "(question)"}, {"_type": "tag", "name": "toUserError", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186386/study_assistant_frontend/src/api.js", "pattern": "/^function toUserError(err, fallback = 'Request failed') {$/", "language": "JavaScript", "kind": "function", "signature": "(err, fallback = 'Request failed')"}], "hash": "e7b1b0c97cce98c4d45103e97a6a80e6", "format-version": 4, "code-base-name": "study_assistant_frontend", "filename": "study_assistant_frontend/src/api.js"}